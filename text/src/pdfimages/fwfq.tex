\documentclass{standalone}
\usepackage{tikz}
\usepackage[utf8] {inputenc}
\usepackage[T2A]{fontenc}
\usepackage[english, russian] {babel}
% Times New Roman
\usepackage{pscyr}
\renewcommand{\rmdefault}{ftm}

\begin{document}

	\begin{tikzpicture}
 		\draw (0, 0) rectangle (15, 5);

		% Flow 1
		\draw (1, 3.5) rectangle (4, 4) node[above left] {Поток 1};
		\draw[fill=orange] (2.5,   3.5) rectangle (3,   4);
		\draw[fill=orange] (3.6, 3.5) rectangle (3.9, 4);

		% Flow 2
		\draw (1, 2.5) rectangle (4, 3) node[above left] {Поток 2};
		\draw[fill=green] (1.6,   2.5) rectangle (2,   3);
		\draw[fill=green] (2.3, 2.5) rectangle (2.8, 3);
		\draw[fill=green] (3.6, 2.5) rectangle (3.8, 3);

		% Flow 3
		\draw (1, 1.5) rectangle (4, 2) node[above left] {Поток 3};
		\draw[fill=blue] (1.3, 1.5) rectangle (1.6, 2);
		\draw[fill=blue] (2,   1.5) rectangle (2.2, 2);
		\draw[fill=blue] (2.6, 1.5) rectangle (3.1, 2);
		\draw[fill=blue] (3.3, 1.5) rectangle (3.6, 2);
		\draw[fill=blue] (3.9, 1.5) rectangle (4, 2);

		% Flow 4
		\draw (1, 0.5) rectangle (4, 1) node[above left] {Поток 4};
		\draw[fill=yellow] (1.1, 0.5) rectangle (1.7, 1);
		\draw[fill=yellow] (2,   0.5) rectangle (2.1, 1);
		\draw[fill=yellow] (2.3, 0.5) rectangle (2.8, 1);
		\draw[fill=yellow] (3.1, 0.5) rectangle (3.2, 1);
		\draw[fill=yellow] (3.3, 0.5) rectangle (3.8, 1);

		\draw[->] (4, 3.75) to (4.7, 3.75);
		\draw[->] (4, 2.75) to (4.7, 2.75);
		\draw[->] (4, 1.75) to (4.7, 1.75);
		\draw[->] (4, 0.75) to (4.7, 0.75);

		% Classifier
		\draw (4.7,0.3) rectangle (5.7, 4.3) node[pos=.5] {};
		\draw[->] (5.7, 3.75) to (6.4, 3.75);
		\draw[->] (5.7, 2.75) to (6.4, 2.75);
		\draw[->] (5.7, 1.75) to (6.4, 1.75);
		\draw[->] (5.7, 0.75) to (6.4, 0.75);

		% Flow 1
		\draw (6.4, 3.5) rectangle (9.2, 4) node[above left] {Очередь 1};
		\draw[fill=orange] (7.5, 3.5) rectangle (8,   4);
		\draw[fill=orange] (8.6, 3.5) rectangle (8.9, 4);

		% Flow 2
		\draw (6.4, 2.5) rectangle (9.2, 3) node[above left] {Очередь 2};
		\draw[fill=green] (6.6, 2.5) rectangle (7,   3);
		\draw[fill=green] (7.3, 2.5) rectangle (7.8, 3);
		\draw[fill=green] (8.6, 2.5) rectangle (8.8, 3);

		% Flow 3
		\draw (6.4, 1.5) rectangle (9.2, 2) node[above left] {Очередь 3};
		\draw[fill=blue] (6.5, 1.5) rectangle (6.8, 2);
		\draw[fill=blue] (7,   1.5) rectangle (7.2, 2);
		\draw[fill=blue] (7.6, 1.5) rectangle (8.1, 2);
		\draw[fill=blue] (8.3, 1.5) rectangle (8.6, 2);
		\draw[fill=blue] (8.9, 1.5) rectangle (9, 2);


		% Flow 4
		\draw (6.4, 0.5) rectangle (9.2, 1) node[above left] {Очередь 4};
		\draw[fill=yellow] (6.5, 0.5) rectangle (7.1, 1);
		\draw[fill=yellow] (7.3,   0.5) rectangle (7.4, 1);
		\draw[fill=yellow] (7.6, 0.5) rectangle (8.1, 1);
		\draw[fill=yellow] (8.4, 0.5) rectangle (8.5, 1);
		\draw[fill=yellow] (8.6, 0.5) rectangle (9.1, 1);

		\draw[->] (9.2, 3.75) to (10, 3.75);
		\draw[->] (9.2, 2.75) to (10, 2.75);
		\draw[->] (9.2, 1.75) to (10, 1.75);
		\draw[->] (9.2, 0.75) to (10, 0.75);

		\draw (10,0.3) rectangle (11, 4.3) node[pos=.5] {WFQ};

		% Out
		\draw (12, 1.8) rectangle (13, 2.8) node[above left] {Выход};
		\draw[fill=blue] (12.5, 1.8) rectangle (12.6, 2.8);

		\draw[->] (11, 2.3) to (12, 2.3);

		\node[rotate=90] at (5.2, 2.4) {Отбрасывание WFQ};
	\end{tikzpicture}

\end{document}

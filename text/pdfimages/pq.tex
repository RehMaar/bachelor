\documentclass{standalone}
\usepackage{tikz}
\usepackage[utf8] {inputenc}
\usepackage[T2A]{fontenc}
\usepackage[english, russian] {babel}
% Times New Roman
\usepackage{pscyr}
\renewcommand{\rmdefault}{ftm}
\usetikzlibrary{arrows,decorations.markings}


\tikzstyle{vecArrow} = [thick, decoration={markings,mark=at position
   1 with {\arrow[semithick]{open triangle 60}}},
   double distance=1.4pt, shorten >= 5.5pt,
   preaction = {decorate},
   postaction = {draw,line width=1.4pt, white,shorten >= 4.5pt}]
\tikzstyle{innerWhite} = [semithick, white,line width=1.4pt, shorten >= 4.5pt]
\begin{document}

	\begin{tikzpicture}
 		\draw (0, 0) rectangle (15, 5);

		% Flow 1
		\draw (1, 3.5) rectangle (4, 4) node[above left] {Поток 1};
		\draw[fill=orange] (2.5,   3.5) rectangle (3,   4);
		\draw[fill=orange] (3.6, 3.5) rectangle (3.9, 4);

		% Flow 2
		\draw (1, 2.5) rectangle (4, 3) node[above left] {Поток 2};
		\draw[fill=green] (1.6,   2.5) rectangle (2,   3);
		\draw[fill=green] (2.3, 2.5) rectangle (2.8, 3);
		\draw[fill=green] (3.6, 2.5) rectangle (3.8, 3);

		% Flow 3
		\draw (1, 1.5) rectangle (4, 2) node[above left] {Поток 3};
		\draw[fill=blue] (1.3, 1.5) rectangle (1.6, 2);
		\draw[fill=blue] (2,   1.5) rectangle (2.2, 2);
		\draw[fill=blue] (2.6, 1.5) rectangle (3.1, 2);
		\draw[fill=blue] (3.3, 1.5) rectangle (3.6, 2);
		\draw[fill=blue] (3.9, 1.5) rectangle (4, 2);

		% Flow 4
		\draw (1, 0.5) rectangle (4, 1) node[above left] {Поток 4};
		\draw[fill=yellow] (1.1, 0.5) rectangle (1.7, 1);
		\draw[fill=yellow] (2,   0.5) rectangle (2.1, 1);
		\draw[fill=yellow] (2.3, 0.5) rectangle (2.8, 1);
		\draw[fill=yellow] (3.1, 0.5) rectangle (3.2, 1);
		\draw[fill=yellow] (3.3, 0.5) rectangle (3.8, 1);

		\draw[vecArrow] (4, 3.75) to (4.7, 3.75);
		\draw[vecArrow] (4, 2.75) to (4.7, 2.75);
		\draw[vecArrow] (4, 1.75) to (4.7, 1.75);
		\draw[vecArrow] (4, 0.75) to (4.7, 0.75);

		% Classifier
		\draw (4.7,0.3) rectangle (5.7, 4.3) node[pos=.5] {};
		\draw[vecArrow] (5.7, 3.25) to (6.4, 3.25);
		\draw[vecArrow] (5.7, 2.25) to (6.4, 2.25);
		\draw[vecArrow] (5.7, 1.25) to (6.4, 1.25);

		% Q1
		\draw (6.4, 3) rectangle (10.2, 3.5) node[above left] {Высокий приоритет};
		\draw[fill=green]  (6.6, 3) rectangle (7,   3.5);
		\draw[fill=green]  (7.6, 3) rectangle (8.1, 3.5);
		\draw[fill=green]  (9.2, 3) rectangle (9.4, 3.5);
		\draw[fill=orange] (8.2, 3) rectangle (8.7,   3.5);
		\draw[fill=orange] (9.6, 3) rectangle (9.9, 3.5);
		% Q2
		\draw (6.4, 2) rectangle (10.2, 2.5) node[above left] {Средний приоритет};
		\draw[fill=blue]   (7.5, 2) rectangle (7.8, 2.5);
		\draw[fill=blue]   (8,   2) rectangle (8.2, 2.5);
		\draw[fill=blue]   (8.6, 2) rectangle (9.1, 2.5);
		\draw[fill=blue]   (9.3, 2) rectangle (9.6, 2.5);
		%\draw[fill=blue]   (9.9, 2) rectangle (10,  2.5);
		% Default
		\draw (6.4, 1) rectangle (10.2, 1.5) node[above left] {Низкий приоритет};
		\draw[fill=yellow] (7.3, 1) rectangle (7.4, 1.5);
		\draw[fill=yellow] (7.6, 1) rectangle (8.1, 1.5);
		\draw[fill=yellow] (8.6, 1) rectangle (9.1, 1.5);
		\draw[fill=yellow] (8.4, 1) rectangle (8.5, 1.5);
		\draw[fill=yellow] (6.5, 1) rectangle (7.1, 1.5);

		\draw[vecArrow] (10.2, 3.25) to (11, 3.25);
		\draw[vecArrow] (10.2, 2.25) to (11, 2.25);
		\draw[vecArrow] (10.2, 1.25) to (11, 1.25);

		\draw (11,0.3) rectangle (12, 4.3) node[pos=.5] {};

		% Out
		\draw (13, 1.8) rectangle (14, 2.8) node[above left] {Выход};
		\draw[fill=blue] (13.5, 1.8) rectangle (13.6, 2.8);
		\draw[vecArrow] (12, 2.3) to (13, 2.3);
		\node[rotate=90] at (5.2, 2.4) {Классификатор};
		\node[rotate=90] at (11.5, 2.4) {Round Robin};
	\end{tikzpicture}

\end{document}

CHOKe -- это бесклассовая ДО, спроектированная для определения и
штрафования потока, который монополизирует очередь.

Once очередь перейдёт определённую среднюю длину, случайный пакет
изымается из очереди. Если оба пакета для помещения в очередь и для
выбрасывания из очереди принадлежат одному потока, оба пакета
выбрасываются. Иначе, если длина очередт всё ещё ниже максимальной длины,
новый пакет имеет конфигурируемый шанс стать помеченным или отброшенным. Если длина
очереди превосходит максимальное значение, новый пакет будет всегда помечен
или отброшенным. Если длина очереди превосходит предел, новый пакет будет
всегда отброшен.

(man tc-choke)


CHOKe -- это вариант алгоритма RED, который штрафует потоки, которые ведут
себя некорректно (misbehaving flows), но не поддерживает состояние потока.
Отличие от алгоритма RED в дополнительном шаге, во время процесса добавления
пакета в очередь. Если средняя длина очереди больше минимального порога, пакет
выбирается случайно из очереди (для чего?). Если выбранный пакет и новый пакет
из одного потока, оба пакета отбрасываются. В отличие от RED, CHOKe нельзя
назвать действительно классовым ДО (кто-то называет?), потому что CHOKe
нуждается в случайном доступе к пакетам в очереди. Это минимальный набор 
свойств для классового интерфейса, позволяющего перезаписывать встроенный
классификатор потока с фильтрами (или без с?).

(sch_choke.c)


